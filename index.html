<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
  <title>Snake Charmer — WebAR</title>
  <style>
    html, body { margin:0; padding:0; height:100%; background:#000; overflow:hidden; }
    .hint { position:fixed; left:0; right:0; bottom:10px; color:#fff; font:14px/1.3 system-ui, -apple-system, Segoe UI, Roboto, Arial; text-align:center; opacity:.9; }
  </style>
  <!-- A-Frame -->
  <script src="https://cdn.jsdelivr.net/npm/aframe@1.4.0/dist/aframe.min.js"></script>
  <!-- MindAR core + A-Frame интеграция -->
  <script src="https://unpkg.com/mind-ar@1.1.0/dist/mindar-face.prod.js"></script>
  <script src="https://unpkg.com/mind-ar@1.1.0/dist/mindar-face-aframe.prod.js"></script>
</head>
<body>
  <div class="hint">Разреши доступ к камере. Держи лицо в кадре — костюм подвяжется к голове.</div>

  <!-- Важно: компонент mindar-face активирует видеопоток -->
  <a-scene mindar-face="autoStart: true; uiLoading: no; uiScanning: no; uiError: yes;"
           embedded color-space="sRGB" xr-mode-ui="enabled: false"
           renderer="colorManagement: true, physicallyCorrectLights: true">

    <a-assets>
      <img id="mask" src="./mask.png" crossorigin="anonymous" />
    </a-assets>

    <!-- Привязка к центру лица (нос). Большая плоскость со сдвигом вниз для «полного костюма» -->
    <a-entity mindar-face-target="anchorIndex: 0;">
      <a-plane src="#mask"
               position="0 -0.68 0.02"
               rotation="0 0 0"
               width="1.18"
               height="1.18"
               transparent="true">
      </a-plane>
    </a-entity>

    <a-camera position="0 0 0"></a-camera>
  </a-scene>
</body>
</html>
